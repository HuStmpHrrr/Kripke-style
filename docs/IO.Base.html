<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>IO.Base</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Comment" id="1">------------------------------------------------------------------------</a>
<a class="Comment" id="74">-- The Agda standard library</a>
<a class="Comment" id="103">--</a>
<a class="Comment" id="106">-- IO: basic types and functions</a>
<a class="Comment" id="139">------------------------------------------------------------------------</a>

<a class="Symbol" id="213">{-#</a> <a class="Keyword" id="217">OPTIONS</a> <a class="Pragma" id="225">--without-K</a> <a class="Pragma" id="237">--guardedness</a> <a class="Symbol" id="251">#-}</a>

<a class="Keyword" id="256">module</a> <a class="Module" href="IO.Base.html" id="263">IO.Base</a> <a class="Keyword" id="271">where</a>

<a class="Keyword" id="278">open</a> <a class="Keyword" id="283">import</a> <a class="Module" href="Level.html" id="290">Level</a>
<a class="Keyword" id="296">open</a> <a class="Keyword" id="301">import</a> <a class="Module" href="Codata.Musical.Notation.html" id="308">Codata.Musical.Notation</a>
<a class="Keyword" id="332">open</a> <a class="Keyword" id="337">import</a> <a class="Module" href="Data.Bool.Base.html" id="344">Data.Bool.Base</a> <a class="Keyword" id="359">using</a> <a class="Symbol" id="365">(</a><a class="Datatype" href="Agda.Builtin.Bool.html#163" id="366">Bool</a><a class="Symbol" id="370">;</a> <a class="InductiveConstructor" href="Agda.Builtin.Bool.html#188" id="372">true</a><a class="Symbol" id="376">;</a> <a class="InductiveConstructor" href="Agda.Builtin.Bool.html#182" id="378">false</a><a class="Symbol" id="383">;</a> <a class="Function" href="Data.Bool.Base.html#932" id="385">not</a><a class="Symbol" id="388">)</a>
<a class="Keyword" id="390">open</a> <a class="Keyword" id="395">import</a> <a class="Module" href="Agda.Builtin.Maybe.html" id="402">Agda.Builtin.Maybe</a> <a class="Keyword" id="421">using</a> <a class="Symbol" id="427">(</a><a class="Datatype" href="Agda.Builtin.Maybe.html#136" id="428">Maybe</a><a class="Symbol" id="433">;</a> <a class="InductiveConstructor" href="Agda.Builtin.Maybe.html#195" id="435">nothing</a><a class="Symbol" id="442">;</a> <a class="InductiveConstructor" href="Agda.Builtin.Maybe.html#174" id="444">just</a><a class="Symbol" id="448">)</a>
<a class="Keyword" id="450">import</a> <a class="Module" href="Agda.Builtin.Unit.html" id="457">Agda.Builtin.Unit</a> <a class="Symbol" id="475">as</a> <a class="Module" id="478">Unit0</a>
<a class="Keyword" id="484">open</a> <a class="Keyword" id="489">import</a> <a class="Module" href="Data.Unit.Polymorphic.Base.html" id="496">Data.Unit.Polymorphic.Base</a>
<a class="Keyword" id="523">open</a> <a class="Keyword" id="528">import</a> <a class="Module" href="Function.Base.html" id="535">Function.Base</a> <a class="Keyword" id="549">using</a> <a class="Symbol" id="555">(</a><a class="Function Operator" href="Function.Base.html#3637" id="556">_∘′_</a><a class="Symbol" id="560">;</a> <a class="Function" href="Function.Base.html#716" id="562">const</a><a class="Symbol" id="567">;</a> <a class="Function" href="Function.Base.html#1629" id="569">flip</a><a class="Symbol" id="573">)</a>
<a class="Keyword" id="575">import</a> <a class="Module" href="IO.Primitive.html" id="582">IO.Primitive</a> <a class="Symbol" id="595">as</a> <a class="Module" id="598">Prim</a>

<a class="Keyword" id="604">private</a>
  <a class="Keyword" id="614">variable</a>
    <a class="Generalizable" href="IO.Base.html#627" id="627">a</a> <a class="Generalizable" href="IO.Base.html#629" id="629">b</a> <a class="Symbol" id="631">:</a> <a class="Postulate" href="Agda.Primitive.html#597" id="633">Level</a>
    <a class="Generalizable" href="IO.Base.html#643" id="643">A</a> <a class="Symbol" id="645">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="647">Set</a> <a class="Generalizable" href="IO.Base.html#627" id="651">a</a>
    <a class="Generalizable" href="IO.Base.html#657" id="657">B</a> <a class="Symbol" id="659">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="661">Set</a> <a class="Generalizable" href="IO.Base.html#629" id="665">b</a>

<a class="Comment" id="668">------------------------------------------------------------------------</a>
<a class="Comment" id="741">-- The IO monad</a>

<a class="Comment" id="758">-- One cannot write "infinitely large" computations with the</a>
<a class="Comment" id="819">-- postulated IO monad in IO.Primitive without turning off the</a>
<a class="Comment" id="882">-- termination checker (or going via the FFI, or perhaps abusing</a>
<a class="Comment" id="947">-- something else). The following coinductive deep embedding is</a>
<a class="Comment" id="1011">-- introduced to avoid this problem. Possible non-termination is</a>
<a class="Comment" id="1076">-- isolated to the run function below.</a>

<a class="Keyword" id="1116">data</a> <a id="IO"></a><a class="Datatype" href="IO.Base.html#1121" id="1121">IO</a> <a class="Symbol" id="1124">(</a><a class="Bound" href="IO.Base.html#1125" id="1125">A</a> <a class="Symbol" id="1127">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="1129">Set</a> <a class="Generalizable" href="IO.Base.html#627" id="1133">a</a><a class="Symbol" id="1134">)</a> <a class="Symbol" id="1136">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="1138">Set</a> <a class="Symbol" id="1142">(</a><a class="Primitive" href="Agda.Primitive.html#780" id="1143">suc</a> <a class="Bound" href="IO.Base.html#1133" id="1147">a</a><a class="Symbol" id="1148">)</a> <a class="Keyword" id="1150">where</a>
  <a id="IO.lift"></a><a class="InductiveConstructor" href="IO.Base.html#1158" id="1158">lift</a>   <a class="Symbol" id="1165">:</a> <a class="Symbol" id="1167">(</a><a class="Bound" href="IO.Base.html#1168" id="1168">m</a> <a class="Symbol" id="1170">:</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1172">Prim.IO</a> <a class="Bound" href="IO.Base.html#1125" id="1180">A</a><a class="Symbol" id="1181">)</a> <a class="Symbol" id="1183">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1185">IO</a> <a class="Bound" href="IO.Base.html#1125" id="1188">A</a>
  <a id="IO.return"></a><a class="InductiveConstructor" href="IO.Base.html#1192" id="1192">return</a> <a class="Symbol" id="1199">:</a> <a class="Symbol" id="1201">(</a><a class="Bound" href="IO.Base.html#1202" id="1202">x</a> <a class="Symbol" id="1204">:</a> <a class="Bound" href="IO.Base.html#1125" id="1206">A</a><a class="Symbol" id="1207">)</a> <a class="Symbol" id="1209">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1211">IO</a> <a class="Bound" href="IO.Base.html#1125" id="1214">A</a>
  <a id="IO.bind"></a><a class="InductiveConstructor" href="IO.Base.html#1218" id="1218">bind</a>   <a class="Symbol" id="1225">:</a> <a class="Symbol" id="1227">{</a><a class="Bound" href="IO.Base.html#1228" id="1228">B</a> <a class="Symbol" id="1230">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="1232">Set</a> <a class="Bound" href="IO.Base.html#1133" id="1236">a</a><a class="Symbol" id="1237">}</a> <a class="Symbol" id="1239">(</a><a class="Bound" href="IO.Base.html#1240" id="1240">m</a> <a class="Symbol" id="1242">:</a> <a class="Record" href="Agda.Builtin.Coinduction.html#185" id="1244">∞</a> <a class="Symbol" id="1246">(</a><a class="Datatype" href="IO.Base.html#1121" id="1247">IO</a> <a class="Bound" href="IO.Base.html#1228" id="1250">B</a><a class="Symbol" id="1251">))</a> <a class="Symbol" id="1254">(</a><a class="Bound" href="IO.Base.html#1255" id="1255">f</a> <a class="Symbol" id="1257">:</a> <a class="Symbol" id="1259">(</a><a class="Bound" href="IO.Base.html#1260" id="1260">x</a> <a class="Symbol" id="1262">:</a> <a class="Bound" href="IO.Base.html#1228" id="1264">B</a><a class="Symbol" id="1265">)</a> <a class="Symbol" id="1267">→</a> <a class="Record" href="Agda.Builtin.Coinduction.html#185" id="1269">∞</a> <a class="Symbol" id="1271">(</a><a class="Datatype" href="IO.Base.html#1121" id="1272">IO</a> <a class="Bound" href="IO.Base.html#1125" id="1275">A</a><a class="Symbol" id="1276">))</a> <a class="Symbol" id="1279">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1281">IO</a> <a class="Bound" href="IO.Base.html#1125" id="1284">A</a>
  <a id="IO.seq"></a><a class="InductiveConstructor" href="IO.Base.html#1288" id="1288">seq</a>    <a class="Symbol" id="1295">:</a> <a class="Symbol" id="1297">{</a><a class="Bound" href="IO.Base.html#1298" id="1298">B</a> <a class="Symbol" id="1300">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="1302">Set</a> <a class="Bound" href="IO.Base.html#1133" id="1306">a</a><a class="Symbol" id="1307">}</a> <a class="Symbol" id="1309">(</a><a class="Bound" href="IO.Base.html#1310" id="1310">m₁</a> <a class="Symbol" id="1313">:</a> <a class="Record" href="Agda.Builtin.Coinduction.html#185" id="1315">∞</a> <a class="Symbol" id="1317">(</a><a class="Datatype" href="IO.Base.html#1121" id="1318">IO</a> <a class="Bound" href="IO.Base.html#1298" id="1321">B</a><a class="Symbol" id="1322">))</a> <a class="Symbol" id="1325">(</a><a class="Bound" href="IO.Base.html#1326" id="1326">m₂</a> <a class="Symbol" id="1329">:</a> <a class="Record" href="Agda.Builtin.Coinduction.html#185" id="1331">∞</a> <a class="Symbol" id="1333">(</a><a class="Datatype" href="IO.Base.html#1121" id="1334">IO</a> <a class="Bound" href="IO.Base.html#1125" id="1337">A</a><a class="Symbol" id="1338">))</a> <a class="Symbol" id="1341">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1343">IO</a> <a class="Bound" href="IO.Base.html#1125" id="1346">A</a>

<a id="pure"></a><a class="Function" href="IO.Base.html#1349" id="1349">pure</a> <a class="Symbol" id="1354">:</a> <a class="Generalizable" href="IO.Base.html#643" id="1356">A</a> <a class="Symbol" id="1358">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1360">IO</a> <a class="Generalizable" href="IO.Base.html#643" id="1363">A</a>
<a class="Function" href="IO.Base.html#1349" id="1365">pure</a> <a class="Symbol" id="1370">=</a> <a class="InductiveConstructor" href="IO.Base.html#1192" id="1372">return</a>

<a id="lift!"></a><a class="Function" href="IO.Base.html#1380" id="1380">lift!</a> <a class="Symbol" id="1386">:</a> <a class="Datatype" href="IO.Base.html#1121" id="1388">IO</a> <a class="Generalizable" href="IO.Base.html#643" id="1391">A</a> <a class="Symbol" id="1393">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1395">IO</a> <a class="Symbol" id="1398">(</a><a class="Record" href="Level.html#400" id="1399">Lift</a> <a class="Generalizable" href="IO.Base.html#629" id="1404">b</a> <a class="Generalizable" href="IO.Base.html#643" id="1406">A</a><a class="Symbol" id="1407">)</a>
<a class="Function" href="IO.Base.html#1380" id="1409">lift!</a>         <a class="Symbol" id="1423">(</a><a class="InductiveConstructor" href="IO.Base.html#1158" id="1424">lift</a> <a class="Bound" href="IO.Base.html#1429" id="1429">io</a><a class="Symbol" id="1431">)</a>   <a class="Symbol" id="1435">=</a> <a class="InductiveConstructor" href="IO.Base.html#1158" id="1437">lift</a> <a class="Symbol" id="1442">(</a><a class="Bound" href="IO.Base.html#1429" id="1443">io</a> <a class="Postulate Operator" href="IO.Primitive.html#601" id="1446">Prim.&gt;&gt;=</a> <a class="Symbol" id="1455">λ</a> <a class="Bound" href="IO.Base.html#1457" id="1457">a</a> <a class="Symbol" id="1459">→</a> <a class="Postulate" href="IO.Primitive.html#561" id="1461">Prim.return</a> <a class="Symbol" id="1473">(</a><a class="InductiveConstructor" href="Level.html#457" id="1474">Level.lift</a> <a class="Bound" href="IO.Base.html#1457" id="1485">a</a><a class="Symbol" id="1486">))</a>
<a class="Function" href="IO.Base.html#1380" id="1489">lift!</a>         <a class="Symbol" id="1503">(</a><a class="InductiveConstructor" href="IO.Base.html#1192" id="1504">return</a> <a class="Bound" href="IO.Base.html#1511" id="1511">a</a><a class="Symbol" id="1512">)</a>  <a class="Symbol" id="1515">=</a> <a class="InductiveConstructor" href="IO.Base.html#1192" id="1517">return</a> <a class="Symbol" id="1524">(</a><a class="InductiveConstructor" href="Level.html#457" id="1525">Level.lift</a> <a class="Bound" href="IO.Base.html#1511" id="1536">a</a><a class="Symbol" id="1537">)</a>
<a class="Function" href="IO.Base.html#1380" id="1539">lift!</a> <a class="Symbol" id="1545">{</a><a class="Argument" id="1546">b</a> <a class="Symbol" id="1548">=</a> <a class="Bound" href="IO.Base.html#1550" id="1550">b</a><a class="Symbol" id="1551">}</a> <a class="Symbol" id="1553">(</a><a class="InductiveConstructor" href="IO.Base.html#1218" id="1554">bind</a> <a class="Bound" href="IO.Base.html#1559" id="1559">m</a> <a class="Bound" href="IO.Base.html#1561" id="1561">f</a><a class="Symbol" id="1562">)</a>  <a class="Symbol" id="1565">=</a> <a class="InductiveConstructor" href="IO.Base.html#1218" id="1567">bind</a> <a class="Symbol" id="1572">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1573">♯</a> <a class="Function" href="IO.Base.html#1380" id="1575">lift!</a> <a class="Symbol" id="1581">{</a><a class="Argument" id="1582">b</a> <a class="Symbol" id="1584">=</a> <a class="Bound" href="IO.Base.html#1550" id="1586">b</a><a class="Symbol" id="1587">}</a> <a class="Symbol" id="1589">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="1590">♭</a> <a class="Bound" href="IO.Base.html#1559" id="1592">m</a><a class="Symbol" id="1593">))</a>
                                 <a class="Symbol" id="1629">(λ</a> <a class="Bound" href="IO.Base.html#1632" id="1632">x</a> <a class="Symbol" id="1634">→</a> <a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1636">♯</a> <a class="Function" href="IO.Base.html#1380" id="1638">lift!</a> <a class="Symbol" id="1644">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="1645">♭</a> <a class="Symbol" id="1647">(</a><a class="Bound" href="IO.Base.html#1561" id="1648">f</a> <a class="Symbol" id="1650">(</a><a class="Field" href="Level.html#470" id="1651">lower</a> <a class="Bound" href="IO.Base.html#1632" id="1657">x</a><a class="Symbol" id="1658">))))</a>
<a class="Function" href="IO.Base.html#1380" id="1663">lift!</a> <a class="Symbol" id="1669">{</a><a class="Argument" id="1670">b</a> <a class="Symbol" id="1672">=</a> <a class="Bound" href="IO.Base.html#1674" id="1674">b</a><a class="Symbol" id="1675">}</a> <a class="Symbol" id="1677">(</a><a class="InductiveConstructor" href="IO.Base.html#1288" id="1678">seq</a> <a class="Bound" href="IO.Base.html#1682" id="1682">m₁</a> <a class="Bound" href="IO.Base.html#1685" id="1685">m₂</a><a class="Symbol" id="1687">)</a> <a class="Symbol" id="1689">=</a> <a class="InductiveConstructor" href="IO.Base.html#1288" id="1691">seq</a> <a class="Symbol" id="1695">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1696">♯</a> <a class="Function" href="IO.Base.html#1380" id="1698">lift!</a> <a class="Symbol" id="1704">{</a><a class="Argument" id="1705">b</a> <a class="Symbol" id="1707">=</a> <a class="Bound" href="IO.Base.html#1674" id="1709">b</a><a class="Symbol" id="1710">}</a> <a class="Symbol" id="1712">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="1713">♭</a> <a class="Bound" href="IO.Base.html#1682" id="1715">m₁</a><a class="Symbol" id="1717">))</a>
                                <a class="Symbol" id="1752">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1753">♯</a> <a class="Function" href="IO.Base.html#1380" id="1755">lift!</a> <a class="Symbol" id="1761">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="1762">♭</a> <a class="Bound" href="IO.Base.html#1685" id="1764">m₂</a><a class="Symbol" id="1766">))</a>

<a class="Keyword" id="1770">module</a> <a class="Module" href="IO.Base.html#1777" id="1777">_</a> <a class="Symbol" id="1779">{</a><a class="Bound" href="IO.Base.html#1780" id="1780">A</a> <a class="Bound" href="IO.Base.html#1782" id="1782">B</a> <a class="Symbol" id="1784">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="1786">Set</a> <a class="Generalizable" href="IO.Base.html#627" id="1790">a</a><a class="Symbol" id="1791">}</a> <a class="Keyword" id="1793">where</a>

  <a class="Keyword" id="1802">infixl</a> <a class="Number" id="1809">1</a> <a class="Function Operator" href="IO.Base.html#1957" id="1811">_&lt;$&gt;_</a> <a class="Function Operator" href="IO.Base.html#1854" id="1817">_&lt;*&gt;_</a> <a class="Function Operator" href="IO.Base.html#2068" id="1823">_&gt;&gt;=_</a> <a class="Function Operator" href="IO.Base.html#2196" id="1829">_&gt;&gt;_</a>
  <a class="Keyword" id="1836">infixr</a> <a class="Number" id="1843">1</a> <a class="Function Operator" href="IO.Base.html#2139" id="1845">_=&lt;&lt;_</a>

  <a class="Function Operator" href="IO.Base.html#1854" id="1854">_&lt;*&gt;_</a> <a class="Symbol" id="1860">:</a> <a class="Datatype" href="IO.Base.html#1121" id="1862">IO</a> <a class="Symbol" id="1865">(</a><a class="Bound" href="IO.Base.html#1780" id="1866">A</a> <a class="Symbol" id="1868">→</a> <a class="Bound" href="IO.Base.html#1782" id="1870">B</a><a class="Symbol" id="1871">)</a> <a class="Symbol" id="1873">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1875">IO</a> <a class="Bound" href="IO.Base.html#1780" id="1878">A</a> <a class="Symbol" id="1880">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1882">IO</a> <a class="Bound" href="IO.Base.html#1782" id="1885">B</a>
  <a class="Bound" href="IO.Base.html#1889" id="1889">mf</a> <a class="Function Operator" href="IO.Base.html#1854" id="1892">&lt;*&gt;</a> <a class="Bound" href="IO.Base.html#1896" id="1896">mx</a> <a class="Symbol" id="1899">=</a> <a class="InductiveConstructor" href="IO.Base.html#1218" id="1901">bind</a> <a class="Symbol" id="1906">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1907">♯</a> <a class="Bound" href="IO.Base.html#1889" id="1909">mf</a><a class="Symbol" id="1911">)</a> <a class="Symbol" id="1913">λ</a> <a class="Bound" href="IO.Base.html#1915" id="1915">f</a> <a class="Symbol" id="1917">→</a> <a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1919">♯</a> <a class="Symbol" id="1921">(</a><a class="InductiveConstructor" href="IO.Base.html#1218" id="1922">bind</a> <a class="Symbol" id="1927">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1928">♯</a> <a class="Bound" href="IO.Base.html#1896" id="1930">mx</a><a class="Symbol" id="1932">)</a> <a class="Symbol" id="1934">λ</a> <a class="Bound" href="IO.Base.html#1936" id="1936">x</a> <a class="Symbol" id="1938">→</a> <a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="1940">♯</a> <a class="Function" href="IO.Base.html#1349" id="1942">pure</a> <a class="Symbol" id="1947">(</a><a class="Bound" href="IO.Base.html#1915" id="1948">f</a> <a class="Bound" href="IO.Base.html#1936" id="1950">x</a><a class="Symbol" id="1951">))</a>

  <a class="Function Operator" href="IO.Base.html#1957" id="1957">_&lt;$&gt;_</a> <a class="Symbol" id="1963">:</a> <a class="Symbol" id="1965">(</a><a class="Bound" href="IO.Base.html#1780" id="1966">A</a> <a class="Symbol" id="1968">→</a> <a class="Bound" href="IO.Base.html#1782" id="1970">B</a><a class="Symbol" id="1971">)</a> <a class="Symbol" id="1973">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1975">IO</a> <a class="Bound" href="IO.Base.html#1780" id="1978">A</a> <a class="Symbol" id="1980">→</a> <a class="Datatype" href="IO.Base.html#1121" id="1982">IO</a> <a class="Bound" href="IO.Base.html#1782" id="1985">B</a>
  <a class="Bound" href="IO.Base.html#1989" id="1989">f</a> <a class="Function Operator" href="IO.Base.html#1957" id="1991">&lt;$&gt;</a> <a class="Bound" href="IO.Base.html#1995" id="1995">m</a> <a class="Symbol" id="1997">=</a> <a class="Function" href="IO.Base.html#1349" id="1999">pure</a> <a class="Bound" href="IO.Base.html#1989" id="2004">f</a> <a class="Function Operator" href="IO.Base.html#1854" id="2006">&lt;*&gt;</a> <a class="Bound" href="IO.Base.html#1995" id="2010">m</a>

  <a class="Function Operator" href="IO.Base.html#2015" id="2015">_&lt;$_</a> <a class="Symbol" id="2020">:</a> <a class="Bound" href="IO.Base.html#1782" id="2022">B</a> <a class="Symbol" id="2024">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2026">IO</a> <a class="Bound" href="IO.Base.html#1780" id="2029">A</a> <a class="Symbol" id="2031">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2033">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2036">B</a>
  <a class="Bound" href="IO.Base.html#2040" id="2040">b</a> <a class="Function Operator" href="IO.Base.html#2015" id="2042">&lt;$</a> <a class="Bound" href="IO.Base.html#2045" id="2045">m</a> <a class="Symbol" id="2047">=</a> <a class="Symbol" id="2049">(</a><a class="Function" href="Function.Base.html#716" id="2050">const</a> <a class="Bound" href="IO.Base.html#2040" id="2056">b</a><a class="Symbol" id="2057">)</a> <a class="Function Operator" href="IO.Base.html#1957" id="2059">&lt;$&gt;</a> <a class="Bound" href="IO.Base.html#2045" id="2063">m</a>

  <a class="Function Operator" href="IO.Base.html#2068" id="2068">_&gt;&gt;=_</a> <a class="Symbol" id="2074">:</a> <a class="Datatype" href="IO.Base.html#1121" id="2076">IO</a> <a class="Bound" href="IO.Base.html#1780" id="2079">A</a> <a class="Symbol" id="2081">→</a> <a class="Symbol" id="2083">(</a><a class="Bound" href="IO.Base.html#1780" id="2084">A</a> <a class="Symbol" id="2086">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2088">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2091">B</a><a class="Symbol" id="2092">)</a> <a class="Symbol" id="2094">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2096">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2099">B</a>
  <a class="Bound" href="IO.Base.html#2103" id="2103">m</a> <a class="Function Operator" href="IO.Base.html#2068" id="2105">&gt;&gt;=</a> <a class="Bound" href="IO.Base.html#2109" id="2109">f</a> <a class="Symbol" id="2111">=</a> <a class="InductiveConstructor" href="IO.Base.html#1218" id="2113">bind</a> <a class="Symbol" id="2118">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="2119">♯</a> <a class="Bound" href="IO.Base.html#2103" id="2121">m</a><a class="Symbol" id="2122">)</a> <a class="Symbol" id="2124">λ</a> <a class="Bound" href="IO.Base.html#2126" id="2126">x</a> <a class="Symbol" id="2128">→</a> <a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="2130">♯</a> <a class="Bound" href="IO.Base.html#2109" id="2132">f</a> <a class="Bound" href="IO.Base.html#2126" id="2134">x</a>

  <a class="Function Operator" href="IO.Base.html#2139" id="2139">_=&lt;&lt;_</a> <a class="Symbol" id="2145">:</a> <a class="Symbol" id="2147">(</a><a class="Bound" href="IO.Base.html#1780" id="2148">A</a> <a class="Symbol" id="2150">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2152">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2155">B</a><a class="Symbol" id="2156">)</a> <a class="Symbol" id="2158">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2160">IO</a> <a class="Bound" href="IO.Base.html#1780" id="2163">A</a> <a class="Symbol" id="2165">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2167">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2170">B</a>
  <a class="Function Operator" href="IO.Base.html#2139" id="2174">_=&lt;&lt;_</a> <a class="Symbol" id="2180">=</a> <a class="Function" href="Function.Base.html#1629" id="2182">flip</a> <a class="Function Operator" href="IO.Base.html#2068" id="2187">_&gt;&gt;=_</a>

  <a class="Function Operator" href="IO.Base.html#2196" id="2196">_&gt;&gt;_</a> <a class="Symbol" id="2201">:</a> <a class="Datatype" href="IO.Base.html#1121" id="2203">IO</a> <a class="Bound" href="IO.Base.html#1780" id="2206">A</a> <a class="Symbol" id="2208">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2210">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2213">B</a> <a class="Symbol" id="2215">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2217">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2220">B</a>
  <a class="Bound" href="IO.Base.html#2224" id="2224">m₁</a> <a class="Function Operator" href="IO.Base.html#2196" id="2227">&gt;&gt;</a> <a class="Bound" href="IO.Base.html#2230" id="2230">m₂</a> <a class="Symbol" id="2233">=</a> <a class="InductiveConstructor" href="IO.Base.html#1288" id="2235">seq</a> <a class="Symbol" id="2239">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="2240">♯</a> <a class="Bound" href="IO.Base.html#2224" id="2242">m₁</a><a class="Symbol" id="2244">)</a> <a class="Symbol" id="2246">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="2247">♯</a> <a class="Bound" href="IO.Base.html#2230" id="2249">m₂</a><a class="Symbol" id="2251">)</a>

  <a class="Function Operator" href="IO.Base.html#2256" id="2256">_&lt;&lt;_</a> <a class="Symbol" id="2261">:</a> <a class="Datatype" href="IO.Base.html#1121" id="2263">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2266">B</a> <a class="Symbol" id="2268">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2270">IO</a> <a class="Bound" href="IO.Base.html#1780" id="2273">A</a> <a class="Symbol" id="2275">→</a> <a class="Datatype" href="IO.Base.html#1121" id="2277">IO</a> <a class="Bound" href="IO.Base.html#1782" id="2280">B</a>
  <a class="Function Operator" href="IO.Base.html#2256" id="2284">_&lt;&lt;_</a> <a class="Symbol" id="2289">=</a> <a class="Function" href="Function.Base.html#1629" id="2291">flip</a> <a class="Function Operator" href="IO.Base.html#2196" id="2296">_&gt;&gt;_</a>

<a class="Comment" id="2302">------------------------------------------------------------------------</a>
<a class="Comment" id="2375">-- Running programs</a>

<a class="Comment" id="2396">-- A value of type `IO A` is a description of a computation that may</a>
<a class="Comment" id="2465">-- eventually produce an `A`. The `run` function converts this description</a>
<a class="Comment" id="2540">-- of a computation into calls to primitive functions that will actually</a>
<a class="Comment" id="2613">-- perform it.</a>

<a class="Symbol" id="2629">{-#</a> <a class="Keyword" id="2633">NON_TERMINATING</a> <a class="Symbol" id="2649">#-}</a>
<a id="run"></a><a class="Function" href="IO.Base.html#2653" id="2653">run</a> <a class="Symbol" id="2657">:</a> <a class="Datatype" href="IO.Base.html#1121" id="2659">IO</a> <a class="Generalizable" href="IO.Base.html#643" id="2662">A</a> <a class="Symbol" id="2664">→</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="2666">Prim.IO</a> <a class="Generalizable" href="IO.Base.html#643" id="2674">A</a>
<a class="Function" href="IO.Base.html#2653" id="2676">run</a> <a class="Symbol" id="2680">(</a><a class="InductiveConstructor" href="IO.Base.html#1158" id="2681">lift</a> <a class="Bound" href="IO.Base.html#2686" id="2686">m</a><a class="Symbol" id="2687">)</a>    <a class="Symbol" id="2692">=</a> <a class="Bound" href="IO.Base.html#2686" id="2694">m</a>
<a class="Function" href="IO.Base.html#2653" id="2696">run</a> <a class="Symbol" id="2700">(</a><a class="InductiveConstructor" href="IO.Base.html#1192" id="2701">return</a> <a class="Bound" href="IO.Base.html#2708" id="2708">x</a><a class="Symbol" id="2709">)</a>  <a class="Symbol" id="2712">=</a> <a class="Postulate" href="IO.Primitive.html#561" id="2714">Prim.return</a> <a class="Bound" href="IO.Base.html#2708" id="2726">x</a>
<a class="Function" href="IO.Base.html#2653" id="2728">run</a> <a class="Symbol" id="2732">(</a><a class="InductiveConstructor" href="IO.Base.html#1218" id="2733">bind</a> <a class="Bound" href="IO.Base.html#2738" id="2738">m</a> <a class="Bound" href="IO.Base.html#2740" id="2740">f</a><a class="Symbol" id="2741">)</a>  <a class="Symbol" id="2744">=</a> <a class="Function" href="IO.Base.html#2653" id="2746">run</a> <a class="Symbol" id="2750">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="2751">♭</a> <a class="Bound" href="IO.Base.html#2738" id="2753">m</a> <a class="Symbol" id="2755">)</a> <a class="Postulate Operator" href="IO.Primitive.html#601" id="2757">Prim.&gt;&gt;=</a> <a class="Symbol" id="2766">λ</a> <a class="Bound" href="IO.Base.html#2768" id="2768">x</a> <a class="Symbol" id="2770">→</a> <a class="Function" href="IO.Base.html#2653" id="2772">run</a> <a class="Symbol" id="2776">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="2777">♭</a> <a class="Symbol" id="2779">(</a><a class="Bound" href="IO.Base.html#2740" id="2780">f</a> <a class="Bound" href="IO.Base.html#2768" id="2782">x</a><a class="Symbol" id="2783">))</a>
<a class="Function" href="IO.Base.html#2653" id="2786">run</a> <a class="Symbol" id="2790">(</a><a class="InductiveConstructor" href="IO.Base.html#1288" id="2791">seq</a> <a class="Bound" href="IO.Base.html#2795" id="2795">m₁</a> <a class="Bound" href="IO.Base.html#2798" id="2798">m₂</a><a class="Symbol" id="2800">)</a> <a class="Symbol" id="2802">=</a> <a class="Function" href="IO.Base.html#2653" id="2804">run</a> <a class="Symbol" id="2808">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="2809">♭</a> <a class="Bound" href="IO.Base.html#2795" id="2811">m₁</a><a class="Symbol" id="2813">)</a> <a class="Postulate Operator" href="IO.Primitive.html#601" id="2815">Prim.&gt;&gt;=</a> <a class="Symbol" id="2824">λ</a> <a class="Bound" href="IO.Base.html#2826" id="2826">_</a> <a class="Symbol" id="2828">→</a> <a class="Function" href="IO.Base.html#2653" id="2830">run</a> <a class="Symbol" id="2834">(</a><a class="Field" href="Agda.Builtin.Coinduction.html#253" id="2835">♭</a> <a class="Bound" href="IO.Base.html#2798" id="2837">m₂</a><a class="Symbol" id="2839">)</a>

<a class="Comment" id="2842">-- The entrypoint of an Agda program will be assigned type `Main` and</a>
<a class="Comment" id="2912">-- implemented using `run` on some `IO ⊤` program.</a>

<a id="Main"></a><a class="Function" href="IO.Base.html#2964" id="2964">Main</a> <a class="Symbol" id="2969">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="2971">Set</a>
<a class="Function" href="IO.Base.html#2964" id="2975">Main</a> <a class="Symbol" id="2980">=</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="2982">Prim.IO</a> <a class="Symbol" id="2990">{</a><a class="Function" href="Level.html#512" id="2991">0ℓ</a><a class="Symbol" id="2993">}</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="2995">⊤</a>

<a class="Comment" id="2998">------------------------------------------------------------------------</a>
<a class="Comment" id="3071">-- Utilities</a>

<a class="Comment" id="3085">-- Make a unit-returning primitive level polymorphic</a>
<a id="lift′"></a><a class="Function" href="IO.Base.html#3138" id="3138">lift′</a> <a class="Symbol" id="3144">:</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="3146">Prim.IO</a> <a class="Record" href="Agda.Builtin.Unit.html#164" id="3154">Unit0.⊤</a> <a class="Symbol" id="3162">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3164">IO</a> <a class="Symbol" id="3167">{</a><a class="Generalizable" href="IO.Base.html#627" id="3168">a</a><a class="Symbol" id="3169">}</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3171">⊤</a>
<a class="Function" href="IO.Base.html#3138" id="3173">lift′</a> <a class="Bound" href="IO.Base.html#3179" id="3179">io</a> <a class="Symbol" id="3182">=</a> <a class="InductiveConstructor" href="IO.Base.html#1158" id="3184">lift</a> <a class="Symbol" id="3189">(</a><a class="Bound" href="IO.Base.html#3179" id="3190">io</a> <a class="Postulate Operator" href="IO.Primitive.html#601" id="3193">Prim.&gt;&gt;=</a> <a class="Symbol" id="3202">λ</a> <a class="Bound" href="IO.Base.html#3204" id="3204">_</a> <a class="Symbol" id="3206">→</a> <a class="Postulate" href="IO.Primitive.html#561" id="3208">Prim.return</a> <a class="Symbol" id="3220">_)</a>

<a class="Comment" id="3224">-- Throw away the result</a>
<a id="ignore"></a><a class="Function" href="IO.Base.html#3249" id="3249">ignore</a> <a class="Symbol" id="3256">:</a> <a class="Datatype" href="IO.Base.html#1121" id="3258">IO</a> <a class="Generalizable" href="IO.Base.html#643" id="3261">A</a> <a class="Symbol" id="3263">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3265">IO</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3268">⊤</a>
<a class="Function" href="IO.Base.html#3249" id="3270">ignore</a> <a class="Bound" href="IO.Base.html#3277" id="3277">io</a> <a class="Symbol" id="3280">=</a> <a class="Bound" href="IO.Base.html#3277" id="3282">io</a> <a class="Function Operator" href="IO.Base.html#2196" id="3285">&gt;&gt;</a> <a class="InductiveConstructor" href="IO.Base.html#1192" id="3288">return</a> <a class="Symbol" id="3295">_</a>

<a class="Comment" id="3298">-- Conditional executions</a>
<a id="when"></a><a class="Function" href="IO.Base.html#3324" id="3324">when</a> <a class="Symbol" id="3329">:</a> <a class="Datatype" href="Agda.Builtin.Bool.html#163" id="3331">Bool</a> <a class="Symbol" id="3336">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3338">IO</a> <a class="Symbol" id="3341">{</a><a class="Generalizable" href="IO.Base.html#627" id="3342">a</a><a class="Symbol" id="3343">}</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3345">⊤</a> <a class="Symbol" id="3347">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3349">IO</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3352">⊤</a>
<a class="Function" href="IO.Base.html#3324" id="3354">when</a> <a class="InductiveConstructor" href="Agda.Builtin.Bool.html#188" id="3359">true</a> <a class="Bound" href="IO.Base.html#3364" id="3364">m</a> <a class="Symbol" id="3366">=</a> <a class="Bound" href="IO.Base.html#3364" id="3368">m</a>
<a class="Function" href="IO.Base.html#3324" id="3370">when</a> <a class="InductiveConstructor" href="Agda.Builtin.Bool.html#182" id="3375">false</a> <a class="Symbol" id="3381">_</a> <a class="Symbol" id="3383">=</a> <a class="Function" href="IO.Base.html#1349" id="3385">pure</a> <a class="Symbol" id="3390">_</a>

<a id="unless"></a><a class="Function" href="IO.Base.html#3393" id="3393">unless</a> <a class="Symbol" id="3400">:</a> <a class="Datatype" href="Agda.Builtin.Bool.html#163" id="3402">Bool</a> <a class="Symbol" id="3407">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3409">IO</a> <a class="Symbol" id="3412">{</a><a class="Generalizable" href="IO.Base.html#627" id="3413">a</a><a class="Symbol" id="3414">}</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3416">⊤</a> <a class="Symbol" id="3418">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3420">IO</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3423">⊤</a>
<a class="Function" href="IO.Base.html#3393" id="3425">unless</a> <a class="Symbol" id="3432">=</a> <a class="Function" href="IO.Base.html#3324" id="3434">when</a> <a class="Function Operator" href="Function.Base.html#3637" id="3439">∘′</a> <a class="Function" href="Data.Bool.Base.html#932" id="3442">not</a>

<a id="whenJust"></a><a class="Function" href="IO.Base.html#3447" id="3447">whenJust</a> <a class="Symbol" id="3456">:</a> <a class="Datatype" href="Agda.Builtin.Maybe.html#136" id="3458">Maybe</a> <a class="Generalizable" href="IO.Base.html#643" id="3464">A</a> <a class="Symbol" id="3466">→</a> <a class="Symbol" id="3468">(</a><a class="Generalizable" href="IO.Base.html#643" id="3469">A</a> <a class="Symbol" id="3471">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3473">IO</a> <a class="Symbol" id="3476">{</a><a class="Generalizable" href="IO.Base.html#627" id="3477">a</a><a class="Symbol" id="3478">}</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3480">⊤</a><a class="Symbol" id="3481">)</a> <a class="Symbol" id="3483">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3485">IO</a> <a class="Function" href="Data.Unit.Polymorphic.Base.html#480" id="3488">⊤</a>
<a class="Function" href="IO.Base.html#3447" id="3490">whenJust</a> <a class="Symbol" id="3499">(</a><a class="InductiveConstructor" href="Agda.Builtin.Maybe.html#174" id="3500">just</a> <a class="Bound" href="IO.Base.html#3505" id="3505">a</a><a class="Symbol" id="3506">)</a> <a class="Bound" href="IO.Base.html#3508" id="3508">k</a> <a class="Symbol" id="3510">=</a> <a class="Bound" href="IO.Base.html#3508" id="3512">k</a> <a class="Bound" href="IO.Base.html#3505" id="3514">a</a>
<a class="Function" href="IO.Base.html#3447" id="3516">whenJust</a> <a class="InductiveConstructor" href="Agda.Builtin.Maybe.html#195" id="3525">nothing</a>  <a class="Symbol" id="3534">_</a> <a class="Symbol" id="3536">=</a> <a class="Function" href="IO.Base.html#1349" id="3538">pure</a> <a class="Symbol" id="3543">_</a>

<a class="Comment" id="3546">-- Keep running an IO action until we get a value. Convenient when user</a>
<a class="Comment" id="3618">-- input is involved and it may be malformed.</a>
<a id="untilJust"></a><a class="Function" href="IO.Base.html#3664" id="3664">untilJust</a> <a class="Symbol" id="3674">:</a> <a class="Datatype" href="IO.Base.html#1121" id="3676">IO</a> <a class="Symbol" id="3679">(</a><a class="Datatype" href="Agda.Builtin.Maybe.html#136" id="3680">Maybe</a> <a class="Generalizable" href="IO.Base.html#643" id="3686">A</a><a class="Symbol" id="3687">)</a> <a class="Symbol" id="3689">→</a> <a class="Datatype" href="IO.Base.html#1121" id="3691">IO</a> <a class="Generalizable" href="IO.Base.html#643" id="3694">A</a>
<a class="Comment" id="3696">-- Note that here we are forced to use `bind` &amp; the musical notation</a>
<a class="Comment" id="3765">-- explicitly to guarantee that the corecursive call is guarded</a>
<a class="Function" href="IO.Base.html#3664" id="3829">untilJust</a> <a class="Bound" href="IO.Base.html#3839" id="3839">m</a> <a class="Symbol" id="3841">=</a> <a class="InductiveConstructor" href="IO.Base.html#1218" id="3843">bind</a> <a class="Symbol" id="3848">(</a><a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="3849">♯</a> <a class="Bound" href="IO.Base.html#3839" id="3851">m</a><a class="Symbol" id="3852">)</a> <a class="Symbol" id="3854">λ</a> <a class="Keyword" id="3856">where</a>
  <a class="InductiveConstructor" href="Agda.Builtin.Maybe.html#195" id="3864">nothing</a>  <a class="Symbol" id="3873">→</a> <a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="3875">♯</a> <a class="Function" href="IO.Base.html#3664" id="3877">untilJust</a> <a class="Bound" href="IO.Base.html#3839" id="3887">m</a>
  <a class="Symbol" id="3891">(</a><a class="InductiveConstructor" href="Agda.Builtin.Maybe.html#174" id="3892">just</a> <a class="Bound" href="IO.Base.html#3897" id="3897">a</a><a class="Symbol" id="3898">)</a> <a class="Symbol" id="3900">→</a> <a class="CoinductiveConstructor Operator" href="Agda.Builtin.Coinduction.html#218" id="3902">♯</a> <a class="InductiveConstructor" href="IO.Base.html#1192" id="3904">return</a> <a class="Bound" href="IO.Base.html#3897" id="3911">a</a>
</pre></div></body></html>