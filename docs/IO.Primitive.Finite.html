<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>IO.Primitive.Finite</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Comment" id="1">------------------------------------------------------------------------</a>
<a class="Comment" id="74">-- The Agda standard library</a>
<a class="Comment" id="103">--</a>
<a class="Comment" id="106">-- Primitive IO: simple bindings to Haskell types and functions</a>
<a class="Comment" id="170">-- Everything is assumed to be finite</a>
<a class="Comment" id="208">------------------------------------------------------------------------</a>

<a class="Symbol" id="282">{-#</a> <a class="Keyword" id="286">OPTIONS</a> <a class="Pragma" id="294">--without-K</a> <a class="Symbol" id="306">#-}</a>

<a class="Keyword" id="311">module</a> <a class="Module" href="IO.Primitive.Finite.html" id="318">IO.Primitive.Finite</a> <a class="Keyword" id="338">where</a>

<a class="Comment" id="345">-- NOTE: the contents of this module should be accessed via `IO` or</a>
<a class="Comment" id="413">-- `IO.Finite`.</a>

<a class="Keyword" id="430">open</a> <a class="Keyword" id="435">import</a> <a class="Module" href="Agda.Builtin.IO.html" id="442">Agda.Builtin.IO</a>
<a class="Keyword" id="458">open</a> <a class="Keyword" id="463">import</a> <a class="Module" href="Agda.Builtin.String.html" id="470">Agda.Builtin.String</a>
<a class="Keyword" id="490">open</a> <a class="Keyword" id="495">import</a> <a class="Module" href="Agda.Builtin.Unit.html" id="502">Agda.Builtin.Unit</a> <a class="Keyword" id="520">using</a> <a class="Symbol" id="526">()</a> <a class="Keyword" id="529">renaming</a> <a class="Symbol" id="538">(</a><a class="Record" href="Agda.Builtin.Unit.html#164" id="539">⊤</a> <a class="Symbol" id="541">to</a> <a class="Record" id="544">Unit</a><a class="Symbol" id="548">)</a>

<a class="Comment" id="551">------------------------------------------------------------------------</a>
<a class="Comment" id="624">-- Simple lazy IO</a>

<a class="Comment" id="643">-- Note that the functions below produce commands which, when</a>
<a class="Comment" id="705">-- executed, may raise exceptions.</a>

<a class="Comment" id="741">-- Note also that the semantics of these functions depends on the</a>
<a class="Comment" id="807">-- version of the Haskell base library. If the version is 4.2.0.0 (or</a>
<a class="Comment" id="877">-- later?), then the functions use the character encoding specified by</a>
<a class="Comment" id="948">-- the locale. For older versions of the library (going back to at</a>
<a class="Comment" id="1015">-- least version 3) the functions use ISO-8859-1.</a>

<a class="Keyword" id="1066">postulate</a>
  <a id="getLine"></a><a class="Postulate" href="IO.Primitive.Finite.html#1078" id="1078">getLine</a>     <a class="Symbol" id="1090">:</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1092">IO</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1095">String</a>
  <a id="readFile"></a><a class="Postulate" href="IO.Primitive.Finite.html#1104" id="1104">readFile</a>    <a class="Symbol" id="1116">:</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1118">String</a> <a class="Symbol" id="1125">→</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1127">IO</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1130">String</a>
  <a id="writeFile"></a><a class="Postulate" href="IO.Primitive.Finite.html#1139" id="1139">writeFile</a>   <a class="Symbol" id="1151">:</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1153">String</a> <a class="Symbol" id="1160">→</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1162">String</a> <a class="Symbol" id="1169">→</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1171">IO</a> <a class="Record" href="IO.Primitive.Finite.html#544" id="1174">Unit</a>
  <a id="appendFile"></a><a class="Postulate" href="IO.Primitive.Finite.html#1181" id="1181">appendFile</a>  <a class="Symbol" id="1193">:</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1195">String</a> <a class="Symbol" id="1202">→</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1204">String</a> <a class="Symbol" id="1211">→</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1213">IO</a> <a class="Record" href="IO.Primitive.Finite.html#544" id="1216">Unit</a>
  <a id="putStr"></a><a class="Postulate" href="IO.Primitive.Finite.html#1223" id="1223">putStr</a>      <a class="Symbol" id="1235">:</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1237">String</a> <a class="Symbol" id="1244">→</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1246">IO</a> <a class="Record" href="IO.Primitive.Finite.html#544" id="1249">Unit</a>
  <a id="putStrLn"></a><a class="Postulate" href="IO.Primitive.Finite.html#1256" id="1256">putStrLn</a>    <a class="Symbol" id="1268">:</a> <a class="Postulate" href="Agda.Builtin.String.html#336" id="1270">String</a> <a class="Symbol" id="1277">→</a> <a class="Postulate" href="Agda.Builtin.IO.html#138" id="1279">IO</a> <a class="Record" href="IO.Primitive.Finite.html#544" id="1282">Unit</a>

<a class="Symbol" id="1288">{-#</a> <a class="Keyword" id="1292">FOREIGN</a> <a class="Pragma" id="1300">GHC</a> <a class="Pragma" id="1304">import</a> <a class="Pragma" id="1311">qualified</a> <a class="Pragma" id="1321">Data.Text</a>    <a class="Pragma" id="1334">as</a> <a class="Pragma" id="1337">T</a>   <a class="Symbol" id="1341">#-}</a>
<a class="Symbol" id="1345">{-#</a> <a class="Keyword" id="1349">FOREIGN</a> <a class="Pragma" id="1357">GHC</a> <a class="Pragma" id="1361">import</a> <a class="Pragma" id="1368">qualified</a> <a class="Pragma" id="1378">Data.Text.IO</a> <a class="Pragma" id="1391">as</a> <a class="Pragma" id="1394">TIO</a> <a class="Symbol" id="1398">#-}</a>
<a class="Symbol" id="1402">{-#</a> <a class="Keyword" id="1406">FOREIGN</a> <a class="Pragma" id="1414">GHC</a> <a class="Pragma" id="1418">import</a> <a class="Pragma" id="1425">qualified</a> <a class="Pragma" id="1435">System.IO</a>           <a class="Symbol" id="1455">#-}</a>
<a class="Symbol" id="1459">{-#</a> <a class="Keyword" id="1463">FOREIGN</a> <a class="Pragma" id="1471">GHC</a> <a class="Pragma" id="1475">import</a> <a class="Pragma" id="1482">qualified</a> <a class="Pragma" id="1492">Control.Exception</a>   <a class="Symbol" id="1512">#-}</a>

<a class="Symbol" id="1517">{-#</a> <a class="Keyword" id="1521">FOREIGN</a> <a class="Pragma" id="1529">GHC</a>

  <a class="Pragma" id="1536">--</a> <a class="Pragma" id="1539">Reads</a> <a class="Pragma" id="1545">a</a> <a class="Pragma" id="1547">finite</a> <a class="Pragma" id="1554">file.</a> <a class="Pragma" id="1560">Raises</a> <a class="Pragma" id="1567">an</a> <a class="Pragma" id="1570">exception</a> <a class="Pragma" id="1580">if</a> <a class="Pragma" id="1583">the</a> <a class="Pragma" id="1587">file</a> <a class="Pragma" id="1592">path</a> <a class="Pragma" id="1597">refers</a>
  <a class="Pragma" id="1606">--</a> <a class="Pragma" id="1609">to</a> <a class="Pragma" id="1612">a</a> <a class="Pragma" id="1614">non-physical</a> <a class="Pragma" id="1627">file</a> <a class="Pragma" id="1632">(like</a> <a class="Pragma" id="1638">"/dev/zero").</a>
  <a class="Pragma" id="1654">readFiniteFile</a> <a class="Pragma" id="1669">::</a> <a class="Pragma" id="1672">T.Text</a> <a class="Pragma" id="1679">-&gt;</a> <a class="Pragma" id="1682">IO</a> <a class="Pragma" id="1685">T.Text</a>
  <a class="Pragma" id="1694">readFiniteFile</a> <a class="Pragma" id="1709">f</a> <a class="Pragma" id="1711">=</a> <a class="Pragma" id="1713">do</a>
    <a class="Pragma" id="1720">h</a> <a class="Pragma" id="1722">&lt;-</a> <a class="Pragma" id="1725">System.IO.openFile</a> <a class="Pragma" id="1744">(T.unpack</a> <a class="Pragma" id="1754">f)</a> <a class="Pragma" id="1757">System.IO.ReadMode</a>
    <a class="Pragma" id="1780">Control.Exception.bracketOnError</a> <a class="Pragma" id="1813">(return</a> <a class="Pragma" id="1821">())</a> <a class="Pragma" id="1825">(\_</a> <a class="Pragma" id="1829">-&gt;</a> <a class="Pragma" id="1832">System.IO.hClose</a> <a class="Pragma" id="1849">h)</a>
                                                 <a class="Pragma" id="1901">(\_</a> <a class="Pragma" id="1905">-&gt;</a> <a class="Pragma" id="1908">System.IO.hFileSize</a> <a class="Pragma" id="1928">h)</a>
    <a class="Pragma" id="1935">TIO.hGetContents</a> <a class="Pragma" id="1952">h</a>

<a class="Symbol" id="1955">#-}</a>

<a class="Symbol" id="1960">{-#</a> <a class="Keyword" id="1964">COMPILE</a> <a class="Keyword" id="1972">GHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1078" id="1976">getLine</a>    <a class="Pragma" id="1987">=</a> <a class="Pragma" id="1989">TIO.getLine</a>               <a class="Symbol" id="2015">#-}</a>
<a class="Symbol" id="2019">{-#</a> <a class="Keyword" id="2023">COMPILE</a> <a class="Keyword" id="2031">GHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1104" id="2035">readFile</a>   <a class="Pragma" id="2046">=</a> <a class="Pragma" id="2048">readFiniteFile</a>            <a class="Symbol" id="2074">#-}</a>
<a class="Symbol" id="2078">{-#</a> <a class="Keyword" id="2082">COMPILE</a> <a class="Keyword" id="2090">GHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1139" id="2094">writeFile</a>  <a class="Pragma" id="2105">=</a> <a class="Pragma" id="2107">TIO.writeFile</a> <a class="Pragma" id="2121">.</a> <a class="Pragma" id="2123">T.unpack</a>  <a class="Symbol" id="2133">#-}</a>
<a class="Symbol" id="2137">{-#</a> <a class="Keyword" id="2141">COMPILE</a> <a class="Keyword" id="2149">GHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1181" id="2153">appendFile</a> <a class="Pragma" id="2164">=</a> <a class="Pragma" id="2166">TIO.appendFile</a> <a class="Pragma" id="2181">.</a> <a class="Pragma" id="2183">T.unpack</a> <a class="Symbol" id="2192">#-}</a>
<a class="Symbol" id="2196">{-#</a> <a class="Keyword" id="2200">COMPILE</a> <a class="Keyword" id="2208">GHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1223" id="2212">putStr</a>     <a class="Pragma" id="2223">=</a> <a class="Pragma" id="2225">TIO.putStr</a>                <a class="Symbol" id="2251">#-}</a>
<a class="Symbol" id="2255">{-#</a> <a class="Keyword" id="2259">COMPILE</a> <a class="Keyword" id="2267">GHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1256" id="2271">putStrLn</a>   <a class="Pragma" id="2282">=</a> <a class="Pragma" id="2284">TIO.putStrLn</a>              <a class="Symbol" id="2310">#-}</a>

<a class="Symbol" id="2315">{-#</a> <a class="Keyword" id="2319">COMPILE</a> <a class="Keyword" id="2327">UHC</a> <a class="Postulate" href="IO.Primitive.Finite.html#1104" id="2331">readFile</a> <a class="Pragma" id="2340">=</a> <a class="Pragma" id="2342">UHC.Agda.Builtins.primReadFiniteFile</a>  <a class="Symbol" id="2380">#-}</a>
</pre></div></body></html>