<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>Relation.Binary.Reasoning.Base.Single</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Comment" id="1">------------------------------------------------------------------------</a>
<a class="Comment" id="74">-- The Agda standard library</a>
<a class="Comment" id="103">--</a>
<a class="Comment" id="106">-- The basic code for equational reasoning with a single relation</a>
<a class="Comment" id="172">------------------------------------------------------------------------</a>

<a class="Symbol" id="246">{-#</a> <a class="Keyword" id="250">OPTIONS</a> <a class="Pragma" id="258">--without-K</a> <a class="Pragma" id="270">--safe</a> <a class="Symbol" id="277">#-}</a>

<a class="Keyword" id="282">open</a> <a class="Keyword" id="287">import</a> <a class="Module" href="Relation.Binary.html" id="294">Relation.Binary</a>

<a class="Keyword" id="311">module</a> <a class="Module" href="Relation.Binary.Reasoning.Base.Single.html" id="318">Relation.Binary.Reasoning.Base.Single</a>
  <a class="Symbol" id="358">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#359" id="359">a</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#361" id="361">ℓ</a><a class="Symbol" id="362">}</a> <a class="Symbol" id="364">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#365" id="365">A</a> <a class="Symbol" id="367">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="369">Set</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#359" id="373">a</a><a class="Symbol" id="374">}</a> <a class="Symbol" id="376">(</a><a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#377" id="377">_∼_</a> <a class="Symbol" id="381">:</a> <a class="Function" href="Relation.Binary.Core.html#882" id="383">Rel</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#365" id="387">A</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#361" id="389">ℓ</a><a class="Symbol" id="390">)</a>
  <a class="Symbol" id="394">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#395" id="395">refl</a> <a class="Symbol" id="400">:</a> <a class="Function" href="Relation.Binary.Definitions.html#1339" id="402">Reflexive</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#377" id="412">_∼_</a><a class="Symbol" id="415">)</a> <a class="Symbol" id="417">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#418" id="418">trans</a> <a class="Symbol" id="424">:</a> <a class="Function" href="Relation.Binary.Definitions.html#1866" id="426">Transitive</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#377" id="437">_∼_</a><a class="Symbol" id="440">)</a>
  <a class="Keyword" id="444">where</a>

<a class="Comment" id="451">-- TODO: the following part is copied from Relation.Binary.Reasoning.Base.Partial</a>
<a class="Comment" id="533">-- in order to avoid larger refactors. We will refactor this part later</a>
<a class="Comment" id="605">-- so taht we use the same framework as Relation.Binary.Reasoning.Base.Partial.</a>

<a class="Keyword" id="686">open</a> <a class="Keyword" id="691">import</a> <a class="Module" href="Level.html" id="698">Level</a> <a class="Keyword" id="704">using</a> <a class="Symbol" id="710">(</a><a class="Primitive Operator" href="Agda.Primitive.html#810" id="711">_⊔_</a><a class="Symbol" id="714">)</a>
<a class="Keyword" id="716">open</a> <a class="Keyword" id="721">import</a> <a class="Module" href="Relation.Binary.PropositionalEquality.Core.html" id="728">Relation.Binary.PropositionalEquality.Core</a> <a class="Symbol" id="771">as</a> <a class="Module" id="774">P</a>
  <a class="Keyword" id="778">using</a> <a class="Symbol" id="784">(</a><a class="Datatype Operator" href="Agda.Builtin.Equality.html#151" id="785">_≡_</a><a class="Symbol" id="788">)</a>

<a class="Keyword" id="791">infix</a>  <a class="Number" id="798">4</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="800">_IsRelatedTo_</a>

<a class="Comment" id="815">------------------------------------------------------------------------</a>
<a class="Comment" id="888">-- Definition of "related to"</a>

<a class="Comment" id="919">-- This seemingly unnecessary type is used to make it possible to</a>
<a class="Comment" id="985">-- infer arguments even if the underlying equality evaluates.</a>

<a class="Keyword" id="1048">data</a> <a id="_IsRelatedTo_"></a><a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="1053">_IsRelatedTo_</a> <a class="Symbol" id="1067">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1068" id="1068">x</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1070" id="1070">y</a> <a class="Symbol" id="1072">:</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#365" id="1074">A</a><a class="Symbol" id="1075">)</a> <a class="Symbol" id="1077">:</a> <a class="Primitive" href="Agda.Primitive.html#326" id="1079">Set</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#361" id="1083">ℓ</a> <a class="Keyword" id="1085">where</a>
  <a id="_IsRelatedTo_.relTo"></a><a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1093" id="1093">relTo</a> <a class="Symbol" id="1099">:</a> <a class="Symbol" id="1101">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1102" id="1102">x∼y</a> <a class="Symbol" id="1106">:</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1068" id="1108">x</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#377" id="1110">∼</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1070" id="1112">y</a><a class="Symbol" id="1113">)</a> <a class="Symbol" id="1115">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1068" id="1117">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="1119">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1070" id="1131">y</a>

<a class="Comment" id="1134">------------------------------------------------------------------------</a>
<a class="Comment" id="1207">-- Reasoning combinators</a>

<a class="Comment" id="1233">-- Note that the arguments to the `step`s are not provided in their</a>
<a class="Comment" id="1301">-- "natural" order and syntax declarations are later used to re-order</a>
<a class="Comment" id="1371">-- them. This is because the `step` ordering allows the type-checker to</a>
<a class="Comment" id="1443">-- better infer the middle argument `y` from the `_IsRelatedTo_`</a>
<a class="Comment" id="1508">-- argument (see issue 622).</a>
<a class="Comment" id="1537">--</a>
<a class="Comment" id="1540">-- This has two practical benefits. First it speeds up type-checking by</a>
<a class="Comment" id="1612">-- approximately a factor of 5. Secondly it allows the combinators to be</a>
<a class="Comment" id="1685">-- used with macros that use reflection, e.g. `Tactic.RingSolver`, where</a>
<a class="Comment" id="1758">-- they need to be able to extract `y` using reflection.</a>

<a class="Keyword" id="1816">infix</a>  <a class="Number" id="1823">1</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#1916" id="1825">begin_</a>
<a class="Keyword" id="1832">infixr</a> <a class="Number" id="1839">2</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2018" id="1841">step-∼</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2182" id="1848">step-≡</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2331" id="1855">step-≡˘</a>
<a class="Keyword" id="1863">infixr</a> <a class="Number" id="1870">2</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2470" id="1872">_≡⟨⟩_</a>
<a class="Keyword" id="1878">infix</a>  <a class="Number" id="1885">3</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2555" id="1887">_∎</a>

<a class="Comment" id="1891">-- Beginning of a proof</a>

<a id="begin_"></a><a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#1916" id="1916">begin_</a> <a class="Symbol" id="1923">:</a> <a class="Symbol" id="1925">∀</a> <a class="Symbol" id="1927">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1928" id="1928">x</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1930" id="1930">y</a><a class="Symbol" id="1931">}</a> <a class="Symbol" id="1933">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1928" id="1935">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="1937">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1930" id="1949">y</a> <a class="Symbol" id="1951">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1928" id="1953">x</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#377" id="1955">∼</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1930" id="1957">y</a>
<a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#1916" id="1959">begin</a> <a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1093" id="1965">relTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1971" id="1971">x∼y</a> <a class="Symbol" id="1975">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1971" id="1977">x∼y</a>

<a class="Comment" id="1982">-- Standard step with the relation</a>

<a id="step-∼"></a><a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2018" id="2018">step-∼</a> <a class="Symbol" id="2025">:</a> <a class="Symbol" id="2027">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2029" id="2029">x</a> <a class="Symbol" id="2031">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2032" id="2032">y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2034" id="2034">z</a><a class="Symbol" id="2035">}</a> <a class="Symbol" id="2037">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2032" id="2039">y</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2041">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2034" id="2053">z</a> <a class="Symbol" id="2055">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2029" id="2057">x</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#377" id="2059">∼</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2032" id="2061">y</a> <a class="Symbol" id="2063">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2029" id="2065">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2067">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2034" id="2079">z</a>
<a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2018" id="2081">step-∼</a> <a class="Symbol" id="2088">_</a> <a class="Symbol" id="2090">(</a><a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1093" id="2091">relTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2097" id="2097">y∼z</a><a class="Symbol" id="2100">)</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2102" id="2102">x∼y</a> <a class="Symbol" id="2106">=</a> <a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1093" id="2108">relTo</a> <a class="Symbol" id="2114">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#418" id="2115">trans</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2102" id="2121">x∼y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2097" id="2125">y∼z</a><a class="Symbol" id="2128">)</a>

<a class="Comment" id="2131">-- Step with a non-trivial propositional equality</a>

<a id="step-≡"></a><a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2182" id="2182">step-≡</a> <a class="Symbol" id="2189">:</a> <a class="Symbol" id="2191">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2193" id="2193">x</a> <a class="Symbol" id="2195">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2196" id="2196">y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2198" id="2198">z</a><a class="Symbol" id="2199">}</a> <a class="Symbol" id="2201">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2196" id="2203">y</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2205">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2198" id="2217">z</a> <a class="Symbol" id="2219">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2193" id="2221">x</a> <a class="Datatype Operator" href="Agda.Builtin.Equality.html#151" id="2223">≡</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2196" id="2225">y</a> <a class="Symbol" id="2227">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2193" id="2229">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2231">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2198" id="2243">z</a>
<a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2182" id="2245">step-≡</a> <a class="Symbol" id="2252">_</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2254" id="2254">x∼z</a> <a class="InductiveConstructor" href="Agda.Builtin.Equality.html#208" id="2258">P.refl</a> <a class="Symbol" id="2265">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2254" id="2267">x∼z</a>

<a class="Comment" id="2272">-- Step with a flipped non-trivial propositional equality</a>

<a id="step-≡˘"></a><a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2331" id="2331">step-≡˘</a> <a class="Symbol" id="2339">:</a> <a class="Symbol" id="2341">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2343" id="2343">x</a> <a class="Symbol" id="2345">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2346" id="2346">y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2348" id="2348">z</a><a class="Symbol" id="2349">}</a> <a class="Symbol" id="2351">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2346" id="2353">y</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2355">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2348" id="2367">z</a> <a class="Symbol" id="2369">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2346" id="2371">y</a> <a class="Datatype Operator" href="Agda.Builtin.Equality.html#151" id="2373">≡</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2343" id="2375">x</a> <a class="Symbol" id="2377">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2343" id="2379">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2381">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2348" id="2393">z</a>
<a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2331" id="2395">step-≡˘</a> <a class="Symbol" id="2403">_</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2405" id="2405">x∼z</a> <a class="InductiveConstructor" href="Agda.Builtin.Equality.html#208" id="2409">P.refl</a> <a class="Symbol" id="2416">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2405" id="2418">x∼z</a>

<a class="Comment" id="2423">-- Step with a trivial propositional equality</a>

<a id="_≡⟨⟩_"></a><a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2470" id="2470">_≡⟨⟩_</a> <a class="Symbol" id="2476">:</a> <a class="Symbol" id="2478">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2480" id="2480">x</a> <a class="Symbol" id="2482">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2483" id="2483">y</a><a class="Symbol" id="2484">}</a> <a class="Symbol" id="2486">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2480" id="2488">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2490">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2483" id="2502">y</a> <a class="Symbol" id="2504">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2480" id="2506">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2508">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2483" id="2520">y</a>
<a class="Symbol" id="2522">_</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2470" id="2524">≡⟨⟩</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2528" id="2528">x∼y</a> <a class="Symbol" id="2532">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2528" id="2534">x∼y</a>

<a class="Comment" id="2539">-- Termination</a>

<a id="_∎"></a><a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2555" id="2555">_∎</a> <a class="Symbol" id="2558">:</a> <a class="Symbol" id="2560">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2562" id="2562">x</a> <a class="Symbol" id="2564">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2562" id="2566">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1053" id="2568">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2562" id="2580">x</a>
<a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2582" id="2582">x</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2555" id="2584">∎</a> <a class="Symbol" id="2586">=</a> <a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1093" id="2588">relTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#395" id="2594">refl</a>

<a class="Comment" id="2600">-- Syntax declarations</a>

<a class="Keyword" id="2624">syntax</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2018" id="2631">step-∼</a>  <a class="Bound" id="2639">x</a> <a class="Bound" id="2641">y∼z</a> <a class="Bound" id="2645">x∼y</a> <a class="Symbol" id="2649">=</a> <a class="Bound" id="2651">x</a> <a class="Function" id="2653">∼⟨</a>  <a class="Bound" id="2657">x∼y</a> <a class="Function" id="2661">⟩</a> <a class="Bound" id="2663">y∼z</a>
<a class="Keyword" id="2667">syntax</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2182" id="2674">step-≡</a>  <a class="Bound" id="2682">x</a> <a class="Bound" id="2684">y≡z</a> <a class="Bound" id="2688">x≡y</a> <a class="Symbol" id="2692">=</a> <a class="Bound" id="2694">x</a> <a class="Function" id="2696">≡⟨</a>  <a class="Bound" id="2700">x≡y</a> <a class="Function" id="2704">⟩</a> <a class="Bound" id="2706">y≡z</a>
<a class="Keyword" id="2710">syntax</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2331" id="2717">step-≡˘</a> <a class="Bound" id="2725">x</a> <a class="Bound" id="2727">y≡z</a> <a class="Bound" id="2731">y≡x</a> <a class="Symbol" id="2735">=</a> <a class="Bound" id="2737">x</a> <a class="Function" id="2739">≡˘⟨</a> <a class="Bound" id="2743">y≡x</a> <a class="Function" id="2747">⟩</a> <a class="Bound" id="2749">y≡z</a>
</pre></div></body></html>